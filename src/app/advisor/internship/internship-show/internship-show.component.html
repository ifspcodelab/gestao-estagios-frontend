<app-content *ngIf="!loading">
  <app-content-toolbar title="Estágios" [backUrl]="'/advisor/internship/'">
  </app-content-toolbar>
  <app-content-main>
    <app-content-detail
      *ngIf="!loading"
      [title]="internship.advisorRequest.student.user.name"
      [subtitle]="handleType(internship.internshipType)"
    >
    </app-content-detail>
    <mat-list *ngIf="handleInternshipIsInProgress()">
      <mat-list-item>
        <mat-icon mat-list-icon>folder</mat-icon>
        <h3 matLine class="line-title">Informações do estágio</h3>
        <p matLine>Razão social: {{ deferredActivityPlan!.companyName }}</p>
        <p matLine>Início do estágio: {{ deferredActivityPlan!.internshipStartDate | date:'dd/MM/yyyy'}}</p>
        <p matLine>Término do estágio: {{ deferredActivityPlan!.internshipEndDate | date:'dd/MM/yyyy' }}</p>
      </mat-list-item>
    </mat-list>
    <mat-tab-group [dynamicHeight]='true' mat-align-tabs="start">
      <mat-tab label="Plano de Atividades">
        <app-content-cards entityName="planos de atividade">
          <app-card
            *ngFor="let activityPlan of internship.activityPlans"
            [title]="'Razão social: ' + activityPlan.companyName"
            [subtitle]="formatDate(activityPlan.internshipStartDate, activityPlan.internshipEndDate)"
            [break]="true"
            [complement]="handleActivityPlanStatus(activityPlan.status)"
            (click)="openActivityPlan(activityPlan)"
          >
          <div card-actions>
            <button *ngIf="handleCanAppraiseActivityPlan(activityPlan)" mat-button color="warn" (click)="handleAppraiseActivityPlan($event, false, activityPlan.id)">
              Indeferir
            </button>
          </div>
          <div card-actions>
            <button *ngIf="handleCanAppraiseActivityPlan(activityPlan)" mat-button color="primary" (click)="handleAppraiseActivityPlan($event, true, activityPlan.id)">
              Deferir
            </button>
          </div>
          </app-card>
        </app-content-cards>
      </mat-tab>
    </mat-tab-group>
  </app-content-main>
</app-content>
